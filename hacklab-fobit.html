<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-type"/>
  <meta content="en-us" http-equiv="Content-Language"/>
  <title>
   /hacklab-fobit
  </title>
 </head>
 <body>
  <b>
   Suuri suunnitelma fobien suhteen
  </b>
  <br/>
  <br/>
  Tämä on tekninen dokumentti ja koskee lähinnä kuvion implementoijia, muut voivat mielenkiinnosta lukea mutta jos on kommentteja tai kysymyksia niin esitä ne IRCissä rambolle ja distille.
  <br/>
  <br/>
  Alkuun lähinnä ulko-oven solenoidilukkoon, tulevaisuudessa voisi kuitata fobilla sähköt päälle työpisteeseen/-koneeseen.
  <br/>
  <br/>
  Ref:
  <a href="./hacklab-uudet-tilat-2014.html">
   http://kirjoitusalusta.fi/hacklab-uudet-tilat-2014
  </a>
  <br/>
  <br/>
  <br/>
  <b>
   Lukkorunko:
  </b>
  <br/>
  <ul>
   <li>
    Arvolukko ehdottaa: EL580 (jaettu kara), avainpesä CYO37C CR.
    <ul>
     <li>
      ~820 asennettuna (kaiken oheissälän kera)
      <br/>
      <br/>
      <br/>
      <br/>
     </li>
    </ul>
   </li>
  </ul>
  <b>
   Kortti/fobi:
  </b>
  Mifare DESFire EV1
  <br/>
  <br/>
  <b>
   Lukijat PN532
  </b>
  , vaihtoehtoja:
  <br/>
  <ul>
   <li>
    <a href="http://www.seeedstudio.com/depot/NFC-Shield-V20-p-1370.html">
     http://www.seeedstudio.com/depot/NFC-Shield-V20-p-1370.html
    </a>
    <ul>
     <li>
      saapunut koeponnistukseen
     </li>
    </ul>
   </li>
   <li>
    <a href="http://www.seeedstudio.com/depot/Xadow-NFC-p-1627.html">
     http://www.seeedstudio.com/depot/Xadow-NFC-p-1627.html
    </a>
    <ul>
     <li>
      <a href="http://www.seeedstudio.com/depot/Xadow-Breakout-p-1519.html">
       http://www.seeedstudio.com/depot/Xadow-Breakout-p-1519.html
      </a>
      <ul>
       <li>
        <s>
         Ei välttämätön, lukijan piirin alla on padit joihin saa kolvattua johdot.
        </s>
        <ul>
         <li>
          Ei saa kaikkia tarvittavia johtoja...
         </li>
        </ul>
       </li>
      </ul>
     </li>
     <li>
      Saatu toimimaan BeagleBonella SPI:n yli
     </li>
    </ul>
   </li>
   <li>
    <a href="https://www.adafruit.com/products/789">
     https://www.adafruit.com/products/789
    </a>
    <ul>
     <li>
      dist tietää hyväks (ja on mukana)
      <ul>
       <li>
        Saatu toimimaan raspilla UARTin yli
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li>
    <a href="http://www.seeedstudio.com/wiki/NFC_Shield_V1.0">
     http://www.seeedstudio.com/wiki/NFC_Shield_V1.0
    </a>
    <ul>
     <li>
      Wanhentunut malli mutta juuri nyt kädessä
      <ul>
       <li>
        Saatu toimimaan raspilla SPI:n yli
        <br/>
        <br/>
        <br/>
        <br/>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
  <b>
   "Tiedostojärjestelmä"
  </b>
  :
  <br/>
  <ul>
   <li>
    Dummyapp vakioavaimella
    <ul>
     <li>
      Sessioiden avaamista varten
     </li>
    </ul>
   </li>
   <li>
    HacklabApp
    <ul>
     <li>
      Kopio kortin UID:stä (voidaan varmentaa että kukaan ei yritä feikata kortin anonyymisti luettavaa UID:tä)
      <ul>
       <li>
        Tai joku muu UID, mutta sitten nämä molemmat pitää olla jäsenkannassa
       </li>
      </ul>
     </li>
     <li>
      Jäsennumero
     </li>
     <li>
      muuta ??
     </li>
     <li>
      Salattu avaimella joka johdetaan kortin UIDsta ja "master" avaimesta (ko masteri ei ole sama jolla kortti on formatoitu)
      <ul>
       <li>
        Näin jos joku onnistuu häxäämään avaimen jotenkin (tälle fobille ei juuri nyt ole tunnettuja hyökkäyksiä ihmisten budjetissa) niin saa vain oman korttinsa avaimen eikä kaikkia.
        <br/>
        <br/>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
  Tosin aivan eka revisio alkuperäisen suunnitelman mukaisesti toimii pelkästään kortiin UID:lla &lt;- 2014.09.21 rambo: toimii, tosin jäsenkannasta puuttuu tiedot joten avainkannan generointi on käsipeliä
  <a href="https://app.younited.com/?shareObject=3277f7c0-7334-e6d9-248f-8767118fcfab">
   https://app.younited.com/?shareObject=3277f7c0-7334-e6d9-248f-8767118fcfab
  </a>
  <br/>
  <br/>
  Ovissa tms "high security" kohdissa on lukija jonka takana on riittävästi älyä ja tehoa neuvotella noi kryptojutut ja varmistaa että kulkuoikat yms on voimassa (ja ajaa GPIO:n läpi esim solenoidilukkoja). Se että onko tämä raspberrypi vai beagleboardblack (vai jokumuu) on vielä auki.
  <br/>
  <br/>
  Nämä älykkäämmät vehkeet saavat kopion kulkuoikeuskannasta alaspäin jäsenrekisteripalvelimelta. ne synkkaavat ylöspäin lokitietoa siitä ketkä ovat kulkeneet ja milloin.
  <br/>
  <br/>
  Nämä älykkäämmät vehkeet ottavat myös vastaan UDP(?) broadcasteja tyhmemmiltä vehkeiltä (jos esim työpöytään kuitataan sähköt fobilla, tähän käytetään pelkkää kortin UIDta ja ei tarkistella mitään muuta joka vaatisi krypton laskentaa yms) ja tallentavat tiedot lokiin (joka synkkautuu sitten palvelimelle).
  <br/>
  <br/>
  <br/>
  <b>
   Linux laudan speksit
  </b>
  :
  <br/>
  <br/>
  <ul>
   <li>
    Halpa
   </li>
   <li>
    Debian out-of-the-box
   </li>
   <li>
    Ethernet out-of-the-box
   </li>
   <li>
    RTC olis kiva
   </li>
   <li>
    PoE olis superkiva (erityisesti siten että jaksais ajaa releitäkin eikä pelkästään lautaa)
    <br/>
    <br/>
   </li>
  </ul>
  <b>
   Lokitietokanta:
  </b>
  <br/>
  <br/>
  CouchDB on varmaan aika hyvä, pitää hanskata replikointi siististi ja olla document-store.
  <br/>
  <br/>
  <b>
   Access privileges kanta:
  </b>
  <br/>
  <br/>
  SQLite riittänee enemmän kuin hyvin, liimaksit imuroi esim SCP:llä (public key, no password)  tunnuksella jolla on ainoastaan lukuoikeus ko tiedostoon. Jäsenrekisteripalvelin generoi tämän kannan erikseen esim kerran tunnissa.
  <br/>
  <br/>
  <br/>
  <br/>
 </body>
</html>