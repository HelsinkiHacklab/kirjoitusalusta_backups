<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-type"/>
  <meta content="en-us" http-equiv="Content-Language"/>
  <title>
   /hacklab-kurssi-digi-3
  </title>
 </head>
 <body>
  <b>
   Digitaalitekniikka-3, FPGA-jatko
  </b>
  <br/>
  <br/>
  <ul>
   <li>
    <a href="https://discourse.hacklab.fi/t/digi-3-jatko/XXX">
     https://discourse.hacklab.fi/t/digi-3-jatko/XXX
    </a>
    <br/>
    <br/>
    <br/>
    <br/>
   </li>
  </ul>
  ---
  <br/>
  <br/>
  // main.v
  <br/>
  <br/>
  // Simple Larson scanner without PWM
  <br/>
  <br/>
  `timescale 1ns / 1ps
  <br/>
  `default_nettype none
  <br/>
  <br/>
  <br/>
  module simple_larson(
  <br/>
  input    wire                     CLOCK,
  <br/>
  output  wire    [7:0]             LED
  <br/>
  );
  <br/>
  <br/>
  reg [22:0]    divclk = 1;            // 22-bits for 25Mhz, 23-bits for 50MHz and 24-bits for 100MHz
  <br/>
  reg [7:0]    larson = 8'b00000001;
  <br/>
  reg         dir = 0;
  <br/>
  <br/>
  assign    LED = larson;                // active high outputs
  <br/>
  <br/>
  always @(posedge CLOCK) begin
  <br/>
  divclk &lt;= divclk + 1'b1;
  <br/>
  if (divclk == 0) begin
  <br/>
  if (larson == 8'b00000001 &amp;&amp; dir == 0) larson &lt;= 8'b00000010;
  <br/>
  if (larson == 8'b00000010 &amp;&amp; dir == 0) larson &lt;= 8'b00000100;
  <br/>
  if (larson == 8'b00000100 &amp;&amp; dir == 0) larson &lt;= 8'b00001000;
  <br/>
  if (larson == 8'b00001000 &amp;&amp; dir == 0) larson &lt;= 8'b00010000;
  <br/>
  if (larson == 8'b00010000 &amp;&amp; dir == 0) larson &lt;= 8'b00100000;
  <br/>
  if (larson == 8'b00100000 &amp;&amp; dir == 0) larson &lt;= 8'b01000000;
  <br/>
  if (larson == 8'b01000000 &amp;&amp; dir == 0) larson &lt;= 8'b10000000;
  <br/>
  if (larson == 8'b10000000 &amp;&amp; dir == 0) dir &lt;= 1;
  <br/>
  if (larson == 8'b10000000 &amp;&amp; dir == 1) larson &lt;= 8'b01000000;
  <br/>
  if (larson == 8'b01000000 &amp;&amp; dir == 1) larson &lt;= 8'b00100000;
  <br/>
  if (larson == 8'b00100000 &amp;&amp; dir == 1) larson &lt;= 8'b00010000;
  <br/>
  if (larson == 8'b00010000 &amp;&amp; dir == 1) larson &lt;= 8'b00001000;
  <br/>
  if (larson == 8'b00001000 &amp;&amp; dir == 1) larson &lt;= 8'b00000100;
  <br/>
  if (larson == 8'b00000100 &amp;&amp; dir == 1) larson &lt;= 8'b00000010;
  <br/>
  if (larson == 8'b00000010 &amp;&amp; dir == 1) larson &lt;= 8'b00000001;
  <br/>
  if (larson == 8'b00000001 &amp;&amp; dir == 1) dir &lt;= 0;
  <br/>
  end
  <br/>
  end
  <br/>
  <br/>
  endmodule
  <br/>
  <br/>
  #**************************************************************************************************************************************************#
  <br/>
  #                                            UCF for Mimas V2                                                                                      #
  <br/>
  #**************************************************************************************************************************************************#
  <br/>
  <br/>
  # XC6SLX9C- CSG324
  <br/>
  <br/>
  CONFIG VCCAUX = "3.3" ;
  <br/>
  <br/>
  NET "CLK_100MHz"                 LOC = V10     | IOSTANDARD = LVCMOS33 | PERIOD = 100MHz ;
  <br/>
  <br/>
  NET "LED[7]"                     LOC = P15     | IOSTANDARD = LVCMOS33 | DRIVE = 8 | SLEW = FAST ;  #D1
  <br/>
  NET "LED[6]"                     LOC = P16     | IOSTANDARD = LVCMOS33 | DRIVE = 8 | SLEW = FAST ;  #D2
  <br/>
  NET "LED[5]"                     LOC = N15     | IOSTANDARD = LVCMOS33 | DRIVE = 8 | SLEW = FAST ;  #D3
  <br/>
  NET "LED[4]"                     LOC = N16     | IOSTANDARD = LVCMOS33 | DRIVE = 8 | SLEW = FAST ;  #D4
  <br/>
  NET "LED[3]"                     LOC = U17     | IOSTANDARD = LVCMOS33 | DRIVE = 8 | SLEW = FAST ;  #D5
  <br/>
  NET "LED[2]"                     LOC = U18     | IOSTANDARD = LVCMOS33 | DRIVE = 8 | SLEW = FAST ;  #D6
  <br/>
  NET "LED[1]"                     LOC = T17     | IOSTANDARD = LVCMOS33 | DRIVE = 8 | SLEW = FAST ;  #D7
  <br/>
  NET "LED[0]"                     LOC = T18     | IOSTANDARD = LVCMOS33 | DRIVE = 8 | SLEW = FAST ;  #D8
  <br/>
  <br/>
  <br/>
 </body>
</html>