<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-type"/>
  <meta content="en-us" http-equiv="Content-Language"/>
  <title>
   /hacklab-x-digi-perus-harjoituksia
  </title>
 </head>
 <body>
  <b>
   ----8&lt;-------8&lt;-------8&lt;-------8&lt;-------8&lt;-------8&lt;-------8&lt;-------8&lt;---
  </b>
  <br/>
  <br/>
  // larson.v
  <br/>
  // Larson scanner for XC9572XL with 50MHz oscillator
  <br/>
  <br/>
  `timescale 1ns / 1ps
  <br/>
  <br/>
  module larson(
  <br/>
  input        wire                     clk50,
  <br/>
  output     wire [3:0]             led
  <br/>
  );
  <br/>
  <br/>
  reg [22:0]    divclk = 1;
  <br/>
  reg [3:0]    larson = 4'b0001;
  <br/>
  reg             dir =        0;
  <br/>
  <br/>
  assign    led = ~larson;
  <br/>
  <br/>
  <br/>
  always @(posedge clk50) begin
  <br/>
  divclk &lt;= divclk + 1;
  <br/>
  if (divclk == 0) begin
  <br/>
  if (larson == 4'b0001 &amp;&amp; dir == 0) larson &lt;= 4'b0010;
  <br/>
  if (larson == 4'b0010 &amp;&amp; dir == 0) larson &lt;= 4'b0100;
  <br/>
  if (larson == 4'b0100 &amp;&amp; dir == 0) larson &lt;= 4'b1000;
  <br/>
  if (larson == 4'b1000 &amp;&amp; dir == 0) dir &lt;= 1;
  <br/>
  if (larson == 4'b1000 &amp;&amp; dir == 1) larson &lt;= 4'b0100;
  <br/>
  if (larson == 4'b0100 &amp;&amp; dir == 1) larson &lt;= 4'b0010;
  <br/>
  if (larson == 4'b0010 &amp;&amp; dir == 1) larson &lt;= 4'b0001;
  <br/>
  if (larson == 4'b0001 &amp;&amp; dir == 1) dir &lt;= 0;
  <br/>
  end
  <br/>
  end
  <br/>
  <br/>
  endmodule
  <br/>
  <br/>
  <b>
   ----8&lt;-------8&lt;-------8&lt;-------8&lt;-------8&lt;-------8&lt;-------8&lt;-------8&lt;---
  </b>
  <br/>
  <br/>
  # xc9572xl-10-vq44.ucf
  <br/>
  <br/>
  NET "clk50"                    LOC = "P1"        | BUFG = CLK;      # 50 MHz oscillator
  <br/>
  NET "led&lt;0&gt;"                LOC = "P31";
  <br/>
  NET "led&lt;1&gt;"                LOC = "P32";
  <br/>
  NET "led&lt;2&gt;"                LOC = "P33";
  <br/>
  NET "led&lt;3&gt;"                LOC = "P34";
  <br/>
  <br/>
  <b>
   ----8&lt;-------8&lt;-------8&lt;-------8&lt;-------8&lt;-------8&lt;-------8&lt;-------8&lt;---
  </b>
  <br/>
  <br/>
 </body>
</html>